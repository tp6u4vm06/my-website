<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>易居房EG City</title>
  <style>
    /* ------- 基本樣式 ------- */
    :root {
      --bg: #1a1a1a;         /* 主背景：石墨灰 */
      --card: #242424;       /* 卡片底色：深灰 */
      --border: #3a3a3a;     /* 邊框線：石板灰 */
      --text-main: #dcdcdc;  /* 主文字 */
      --text-muted: #d3d3d3; /* 次文字 */
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: linear-gradient(180deg, var(--blue-light) 0%, var(--bg) 80%);
      color: var(--muted);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
    }

    /* ------- 導覽列 ------- */
    .nav { 
      display:flex; 
      align-items:center; 
      justify-content:space-between; 
      padding:14px 20px; 
      background:rgba(255,255,255,0.7); 
      backdrop-filter: blur(8px); 
      box-shadow: var(--shadow); 
      position: sticky; 
      top:0; z-index:10; 
    }
    .brand { 
      display:flex; 
      align-items:center; 
      gap:12px; 
    }
    .logo { 
      width:42px; height:42px; 
      border-radius:8px; 
      background:var(--blue); 
      display:flex; 
      align-items:center; 
      justify-content:center; 
      color:#fff; 
      font-weight:700; 
      font-size:18px; 
      box-shadow:0 4px 10px rgba(30,144,255,0.35); 
    }
    .logo img { 
      height:48px; 
      width:auto; 
      object-fit:contain; 
      display:block; 
      border-radius:12px; 
    }
    .nav-links { 
      display:flex; 
      gap:16px; 
      align-items:center; 
    }
    .nav-links a { 
      color:#033; 
      text-decoration:none; 
      font-weight:700; 
      font-size:14px; 
      padding:8px 10px; 
      border-radius:8px; 
    }
    .nav-links a.active, .nav-links a:hover { 
      color:#fff; 
      background:var(--blue); 
    }

    /* ------- Hero 區（僅首頁） ------- */
    .hero {
        position: relative;
        max-width:1200px;
        margin:24px auto;
        border-radius:16px;
        color:#fff;
        box-shadow:var(--shadow);
        background: url("./images/id8.jpg") center/cover no-repeat;
      }
    .hero-inner { 
      padding:64px 32px; 
      max-width:800px; 
      display:flex; 
      flex-direction:column; gap:14px; 
    }
    .hero h1 { 
      margin:0; font-size:40px; 
      line-height:1.1; 
    }
    .hero p { 
      margin:0; 
      font-size:17px; 
      opacity:.95; 
    }
    .cta { 
      margin-top:16px; 
      display:inline-block; 
      padding:12px 20px; 
      border-radius:8px; 
      background:var(--blue); 
      color:#fff; 
      text-decoration:none; 
      font-weight:700; 
      box-shadow:0 6px 14px rgba(30,144,255,.3); 
      transition: background .2s, transform .1s; 
    }
    .cta:hover { 
      background: var(--blue-dark); 
      transform: translateY(-2px); 
    }

    /* ------- 篩選區（首頁/買屋） ------- */
    .controls { 
      max-width:1200px; 
      margin:24px auto; 
      padding:20px; 
      background:#fff; 
      border-radius:12px; 
      display:flex; 
      gap:12px; 
      align-items:center; 
      flex-wrap:wrap; 
      box-shadow: var(--shadow); 
    }
    .controls .field { 
      display:flex; 
      flex-direction:column; 
      gap:6px; 
    }
    label { 
      font-size:13px; 
      color:var(--muted); 
    }
    input[type="text"], input[type="number"], select { padding:10px 12px; border-radius:8px; border:1px solid #c9dcff; min-width:160px; outline:none; }
    input:focus, select:focus { border-color: var(--blue); box-shadow: 0 0 0 3px rgba(30,144,255,0.15); }
    .range-inline { 
      display:flex; 
      gap:8px; 
      align-items:center; 
    }
    .controls .btns { 
      margin-left:auto; 
      display:flex; gap:8px; 
    }

    /* ------- 卡片列表 ------- */
    .container { 
      max-width:1200px; 
      margin:24px auto; 
      padding:0 12px 80px; 
    }
    .section-title { 
      margin:8px 0 14px 4px; 
      font-weight:800; 
      color:#123; 
    }
    .grid { 
      display:grid; 
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); 
      gap:20px; 
    }
    .card { 
      background:var(--card); 
      border-radius:12px; overflow:hidden; 
      box-shadow:var(--shadow); 
      display:flex; 
      flex-direction:column; 
      transition: transform .2s ease, box-shadow .2s ease; 
    }
    .card:hover { 
      transform: translateY(-4px); 
      box-shadow: 0 10px 24px rgba(30,144,255,.15); 
    }
    .card .img { 
      height:160px; 
      background:#ccc center/cover no-repeat; 
    }
    .card .content { 
      padding:12px; 
      display:flex; 
      flex-direction:column; 
      gap:10px; flex:1; 
    }
    .meta { 
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
    }
    .price { 
      font-weight:800; 
      color: var(--blue-dark); 
    }
    .tags { 
      font-size:13px; 
      color: var(--muted); 
    }
    .desc { 
      font-size:14px; 
      color:#333; 
    }
    .card .actions { 
      display:flex; 
      gap:8px; 
      padding:12px; 
      border-top:1px solid #f0f0f0; 
    }
    .btn { 
      flex:1; padding:10px; 
      border-radius:8px; 
      border:0; 
      font-weight:700; 
      cursor:pointer; 
      transition: all .2s; 
    }
    .btn.primary { 
      background: var(--blue); 
      color:#fff; 
    }
    .btn.primary:hover { 
      background: var(--blue-dark); 
    }
    .btn.ghost { 
      background: transparent; 
      border:1px solid #cfd9e8; 
    }
    .btn.ghost:hover { 
      border-color: var(--blue); color: var(--blue); 
    }
    .btn.link { 
      background: transparent; 
      text-decoration: underline; 
      color: var(--blue-dark); 
      flex: 0; 
    }

    /* ------- 比價表格 ------- */
    .table-wrap { 
      overflow-x:auto; 
      background:#fff; 
      border-radius:12px; 
      box-shadow: var(--shadow); 
    }
    table { 
      width:100%; 
      border-collapse:collapse; 
      min-width:720px; 
    }
    th, td { 
      padding:12px; border-bottom:1px solid #eee; 
      text-align:left; 
    }
    th { 
      background:#f7fbff; 
      font-weight:800; 
      color:#123; 
      position:sticky; 
      top:0; 
    }

    /* ------- 響應式 ------- */
    @media (max-width: 760px) {
      .hero-inner { padding:32px 18px; }
      .hero h1 { font-size:28px; }
      .controls { padding:14px; }
      .nav { padding:10px 12px; }
    }
  </style>
</head>
<body>
  <!-- 導覽列 -->
  <header class="nav" role="navigation" aria-label="主選單">
    <div class="brand">
      <div class="logo"><img src="./images/logo.png" alt="易居房 Logo" /></div>
      <div>
        <div style="font-weight:800">易居房EG City</div>
        <div style="font-size:12px;color:var(--muted)">找房・比較・決策</div>
      </div>
    </div>
    <nav class="nav-links">
      <a href="#/home" id="nav-home">首頁</a>
      <a href="#/buy" id="nav-buy">買屋</a>
      <a href="#/compare" id="nav-compare">比價</a>
    </nav>
  </header>

  <!-- 內容容器（由 Router 動態渲染） -->
  <main id="app" class="container" aria-live="polite"></main>

  <script>
    /**
     * 資料（你可改為後端 API）
     */
    const DATA = [
      { id:1, city:"台北市大安區", priceWan:2850, type:"公寓", title:"大安區學區房", img:"./images/id1.jpg", desc:"金華國中|龍門國中|科技大樓站|黃金三樓" },
      { id:2, city:"台北市大安區", priceWan:12880, type:"豪宅", title:"明日博山景高樓豪宅", img:"./images/id2.jpg", desc:"含車位|生活品質佳|社區管理|忠泰建設豪宅典範" },
      { id:3, city:"台中市北屯區", priceWan:2998, type:"別墅", title:"公園臨路透天別墅", img:"./images/id3.jpg", desc:"含車位|位十期重劃區|雙公園" },
      { id:4, city:"台南市北區", priceWan:2380, type:"大樓", title:"帝凡內景觀三房", img:"./images/id4.jpg", desc:"北區精華地段，生活機能佳。" },
      { id:5, city:"新北市板橋區", priceWan:798, type:"大樓", title:"亞東醫院景觀生財屋", img:"./images/id5.jpg", desc:"邊間無敵景觀|近捷運亞東醫院站、信義國小、重慶國中 " },
      { id:6, city:"桃園市龜山區", priceWan:858, type:"大樓", title:"A9棟寬敞景觀一房", img:"./images/id6.jpg", desc:"近捷運增值潛力大。" },
      { id:7, city:"高雄市前鎮區", priceWan:1981, type:"透天", title:"草衙站購物中心旁透天", img:"./images/id7.jpg", desc:"五甲商圈生活機能完善|近國道1號 88快速道路小港機場交通便利" },
      { id:8, city:"宜蘭縣頭城鎮", priceWan:880, type:"大樓", title:"頭城溫泉度假優質專區", img:"./images/id8.jpg", desc:"山嶼海|溫泉|渡假" },
      { id:9, city:"新北市中和區", priceWan:1554, type:"公寓", title:"秀山景平站三樓", img:"./images/id9.jpg", desc:"捷運約400公尺|鄰近學區|市場百貨" },
      { id:10, city:"新竹市北門區", priceWan:1098, type:"公寓", title:"西門街溫馨美三房", img:"./images/id10.jpg", desc:"生活機能完整|屋況維持良好|醫療資源充足" },
      { id:11, city:"彰化縣彰化市", priceWan:588, type:"師範國宅", title:"近彰師大三房有電梯", img:"./images/id11.jpg", desc:"近彰師大、彰師附工|採光通風佳" },
      { id:12, city:"南投縣草屯鎮", priceWan:1698, type:"別墅", title:"輕屋齡車庫別墅", img:"./images/id12.jpg", desc:" 一樓獨立車庫|生活圈超便利" }
    ];

    const NEW_PROJECTS = [
      {
        id:101,
        name:"永康真",
        builder:"永康建建設",
        city:"新北市板橋區",
        priceWanFrom: 2061,
        img:"./images/id101.jpg",
        highlights:["府中雙城心"," 板南線450米"," 新板橋人的醇靜宅"],
        linkBrochure:"https://newhouse.591.com.tw/138134?bid=3248&utm_term=Paid&gad_source=1&gad_campaignid=17039304164&gbraid=0AAAAAD-HmYDe3I06hpqVEnf2Xh2MM5h2N&gclid=CjwKCAjw0sfHBhB6EiwAQtv5qQIg2W5U8740h-r_k3bOHMHA5SCIEFaQ1ccOfLU79l9CwG90D2QyARoCAE8QAvD_BwE"     // 電子型錄／官網
      },
      {
        id:102,
        name:"信義誠家",
        builder:"誠家興建設",
        city:"台北市信義區",
        priceWanFrom: 92,
        img:"./images/id102.jpg",
        highlights:["商圈及學區車行５分鐘內生活圈"],
        linkReserve: "https://forms.gle/xxxx-syc-reserve",
        linkLine:    "https://lin.ee/xxxx-syc-line",
        linkBrochure:"https://newhouse.591.com.tw/136360"
      },
      {
        id:103,
        name:"佳鋐首耀",
        builder:"佳鋐建建設",
        city:"台中市梧棲區",
        priceWanFrom: 728,
        img:"./images/id103.jpg",
        highlights:["車站商圈","雙軌道捷運宅","商圈生活一把抓"],
        linkBrochure:"https://newhouse.591.com.tw/137089"
      }
    ];


    const NEWS = [
      { title:"地產天下", source:"自由電子報",  url:"https://estate.ltn.com.tw/" },
      { title:"房市", source:"工商時報", url:"https://www.ctee.com.tw/livenews/house" },
      { title:"房地產新聞 | 房市資訊", source:"591新聞網", url:"https://news.591.com.tw/" }
    ];

    /** 共用工具 **/
    const formatWan = (wan)=> wan.toLocaleString() + ' 萬';
    const $ = (sel, el=document)=> el.querySelector(sel);
    const $$ = (sel, el=document)=> [...el.querySelectorAll(sel)];

    // 比價清單（localStorage）
    const COMPARE_KEY = 'eg_compare_ids';
    function getCompareIds(){ try { return JSON.parse(localStorage.getItem(COMPARE_KEY) || '[]'); } catch(e){ return []; } }
    function setCompareIds(ids){ localStorage.setItem(COMPARE_KEY, JSON.stringify(ids)); }
    function toggleCompare(id){ const ids = new Set(getCompareIds()); ids.has(id)? ids.delete(id) : ids.add(id); setCompareIds([...ids]); updateCompareBadges(); }
    function inCompare(id){ return getCompareIds().includes(id); }

    // Nav active & 徽章
    function setActiveNav(hash){
      $$('#nav-home, #nav-buy, #nav-compare').forEach(a=>a.classList.remove('active'));
      if(hash.startsWith('#/buy')) $('#nav-buy').classList.add('active');
      else if(hash.startsWith('#/compare')) $('#nav-compare').classList.add('active');
      else $('#nav-home').classList.add('active');
    }
    function updateCompareBadges(){
      const count = getCompareIds().length;
      const nav = $('#nav-compare');
      if(nav) nav.textContent = count ? `比價(${count})` : '比價';
      $$('.btn[data-id][data-role="compare"]').forEach(btn=>{
        const id = Number(btn.dataset.id);
        btn.textContent = inCompare(id) ? '取消比較' : '加入比較';
      });
    }

    /** 卡片 **/
    function card(item){
      return `
        <article class="card" aria-label="房屋卡片">
          <div class="img" style="background-image:url('${item.img}')" role="img" aria-label="${item.title}"></div>
          <div class="content">
            <div class="meta">
              <div>
                <div style="font-weight:800">${item.title}</div>
                <div class="tags">${item.city} • ${item.type}</div>
              </div>
              <div class="price">NT$ ${formatWan(item.priceWan)}</div>
            </div>
            <div class="desc">${item.desc}</div>
          </div>
          <div class="actions">
            <button class="btn ghost" onclick="viewDetail(${item.id})">詳細</button>
            <button class="btn" data-role="compare" data-id="${item.id}" onclick="toggleCompare(${item.id})">${ inCompare(item.id) ? '取消比較' : '加入比較' }</button>
            <button class="btn primary" onclick="contactAgent(${item.id})">我要買</button>
          </div>
        </article>`;
    }
    function projectCard(p){
  return `
    <article class="card">
      <div class="img" style="background-image:url('${p.img}')" role="img" aria-label="${p.name}"></div>
      <div class="content">
        <div class="meta">
          <div style="font-weight:800">${p.name}</div>
          <div class="tags">${p.city} • ${p.builder}</div>
        </div>
        <div class="desc">${p.highlights.map(h=>`#${h}`).join(' ')}</div>
      </div>
      <div class="actions">
        <button class="btn ghost">開價約 NT$ ${formatWan(p.priceWanFrom)}</button>
        <a href="${p.linkBrochure}" target="_blank" class="btn link">預約賞屋</a>
      </div>
    </article>`;
}


    /** 控制列（共用） **/
    function Controls({ showSort=false }){
      return `
      <section class="controls" role="region" aria-label="篩選工具">
        <div class="field">
          <label for="search-city">地區搜尋</label>
          <input id="search-city" type="text" placeholder="輸入城市或行政區（例如：台北市）">
        </div>
        <div class="field">
          <label>價格（萬）</label>
          <div class="range-inline">
            <input id="min-price" type="number" placeholder="最低 (萬)" min="0" style="width:120px">
            <input id="max-price" type="number" placeholder="最高 (萬)" min="0" style="width:120px">
          </div>
        </div>
        <div class="field">
          <label for="type">房屋型態</label>
          <select id="type">
            <option value="">全部</option>
            <option>土地</option>
            <option>公寓</option>
            <option>住宅大樓</option>
            <option>別墅</option>
            <option>店面</option>
            <option>套房</option>
            <option>透天</option>
            <option>華夏</option>
            <option>農舍</option>
            <option>大樓</option>
            <option>廠房</option>
            <option>樓中樓</option>
            <option>辦公商業大樓</option>
            <option>豪宅</option>
          </select>
        </div>
        ${ showSort ? `
        <div class="field">
          <label for="sort">排序</label>
          <select id="sort">
            <option value="relevance">相關性</option>
            <option value="price_asc">價格：由低到高</option>
            <option value="price_desc">價格：由高到低</option>
          </select>
        </div>` : ''}
        <div class="btns">
          <button id="btn-search" class="btn primary">搜尋</button>
          <button id="btn-reset" class="btn ghost">重設</button>
        </div>
      </section>`;
    }

    /** 頁面：首頁 **/
    function PageHome(){
      const top6 = [...DATA].sort((a,b)=> b.priceWan - a.priceWan).slice(0,6); // 熱門物件（示意）
      return `
        <section class="hero" aria-label="主視覺">
          <div class="hero-inner">
            <h1>找到你理想的家</h1>
            <p>依地區、價格與房型快速篩選，並提供詳細資訊與比較功能。</p>
            <a class="cta" href="#/buy">我要找房</a>
          </div>
        </section>
        ${Controls({ showSort:true })}
        <section>
          <h2 class="section-title">熱門物件</h2>
          <div class="grid">${ top6.map(card).join('') }</div>
        </section>
        <section style="margin-top:28px;">
          <h2 class="section-title">新建案</h2>
          <div class="grid">${ NEW_PROJECTS.map(projectCard).join('') }</div>
        </section>
        <section style="margin-top:28px;">
          <h2 class="section-title">即時新聞</h2>
          <div class="table-wrap">
            <table aria-label="房市新聞">
              <thead><tr><th style="width:60%">標題</th><th>來源</th><th>連結</th><th></th></tr></thead>
              <tbody>
                ${NEWS.map(n=>`
                  <tr>
                    <td>${n.title}</td>
                    <td>${n.source}</td>
                    <td><a class="btn link" href="${n.url}" target="_blank" rel="noopener noreferrer">查看</a></td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        </section>
      `;
    }

    /** 頁面：買屋 **/
    function PageBuy(){
      return `
        <h2 class="section-title">待售房屋</h2>
        ${Controls({ showSort:true })}
        <div id="no-results" style="display:none;margin-top:18px;color:var(--muted)">沒有符合條件的房源。</div>
        <div id="grid" class="grid" aria-live="polite"></div>
      `;
    }

    /** 頁面：比價 **/
    function PageCompare(){
      const ids = getCompareIds();
      const items = DATA.filter(d=> ids.includes(d.id));
      return `
        <h2 class="section-title">房屋比價（${ids.length}）</h2>
        <div class="table-wrap">
          <table aria-label="比價表">
            <thead>
              <tr>
                <th>項目</th>
                ${items.map(it=>`<th>${it.title}</th>`).join('')}
              </tr>
            </thead>
            <tbody>
              <tr><td>圖片</td>${items.map(it=>`<td><div class=\"img\" style=\"height:120px;background-image:url('${it.img}')\"></div></td>`).join('')}</tr>
              <tr><td>地點</td>${items.map(it=>`<td>${it.city}</td>`).join('')}</tr>
              <tr><td>型態</td>${items.map(it=>`<td>${it.type}</td>`).join('')}</tr>
              <tr><td>價格</td>${items.map(it=>`<td>NT$ ${formatWan(it.priceWan)}</td>`).join('')}</tr>
              <tr><td>特色</td>${items.map(it=>`<td>${it.desc}</td>`).join('')}</tr>
              <tr><td></td>${items.map(it=>`<td><button class=\"btn ghost\" onclick=\"toggleCompare(${it.id}); route('#/compare')\">移除</button> <button class=\"btn primary\" onclick=\"contactAgent(${it.id})\">洽詢</button></td>`).join('')}</tr>
            </tbody>
          </table>
        </div>
        <div style="margin-top:12px; display:flex; gap:8px;">
          <button class="btn ghost" onclick="setCompareIds([]); route('#/compare')">清空清單</button>
          <button class="btn primary" onclick="route('#/buy')">回到買屋列表</button>
        </div>
      `;
    }

    /** 篩選邏輯（買屋） **/
    function getFilters(){
      return {
        city: ($('#search-city')?.value || '').trim().toLowerCase(),
        minPrice: Number($('#min-price')?.value) || 0,
        maxPrice: Number($('#max-price')?.value) || Infinity,
        type: $('#type')?.value || '',
        sort: $('#sort')?.value || 'relevance'
      };
    }
    function applyFilters(){
      const grid = $('#grid'); if(!grid) return;
      const f = getFilters();
      let results = DATA.filter(d=>{
        const matchCity = !f.city || d.city.toLowerCase().includes(f.city);
        const matchType = !f.type || d.type === f.type;
        const matchPrice = d.priceWan >= f.minPrice && d.priceWan <= f.maxPrice;
        return matchCity && matchType && matchPrice;
      });
      if(f.sort === 'price_asc') results.sort((a,b)=>a.priceWan - b.priceWan);
      else if(f.sort === 'price_desc') results.sort((a,b)=>b.priceWan - a.priceWan);
      renderList(results);
    }
    function renderList(items){
      const grid = $('#grid'); const noResults = $('#no-results');
      if(!grid) return;
      grid.innerHTML = '';
      if(!items.length){ noResults && (noResults.style.display='block'); return; }
      else { noResults && (noResults.style.display='none'); }
      grid.innerHTML = items.map(card).join('');
      updateCompareBadges();
    }

    /** Router **/
    function route(hash){ window.location.hash = hash; }
    function renderRoute(){
      const h = window.location.hash || '#/home';
      setActiveNav(h);
      const app = $('#app');
      if(h.startsWith('#/buy')){
        app.innerHTML = PageBuy();
        $('#btn-search')?.addEventListener('click', applyFilters);
        $('#btn-reset')?.addEventListener('click', ()=>{ $('#search-city').value=''; $('#min-price').value=''; $('#max-price').value=''; $('#type').value=''; $('#sort').value='relevance'; renderList(DATA); });
        renderList(DATA);
      } else if(h.startsWith('#/compare')){
        app.innerHTML = PageCompare();
      } else {
        app.innerHTML = PageHome();
        // 首頁搜尋按鈕：導到買屋並套用條件
        $('#btn-search')?.addEventListener('click', ()=>{
          const params = new URLSearchParams({
            city: $('#search-city').value || '',
            min: $('#min-price').value || '',
            max: $('#max-price').value || '',
            type: $('#type').value || '',
            sort: $('#sort').value || 'relevance'
          });
          route('#/buy?' + params.toString());
        });
        $('#btn-reset')?.addEventListener('click', ()=>{
          $('#search-city').value=''; $('#min-price').value=''; $('#max-price').value=''; $('#type').value=''; $('#sort').value='relevance';
          updateCompareBadges();
        });
      }
      updateCompareBadges();
      // 若 URL 夾帶查詢條件，導入到買屋頁後套用
      if(h.startsWith('#/buy')){
        const q = h.split('?')[1];
        if(q){
          const p = new URLSearchParams(q);
          if($('#search-city')) $('#search-city').value = p.get('city') || '';
          if($('#min-price')) $('#min-price').value = p.get('min') || '';
          if($('#max-price')) $('#max-price').value = p.get('max') || '';
          if($('#type')) $('#type').value = p.get('type') || '';
          if($('#sort')) $('#sort').value = p.get('sort') || 'relevance';
          applyFilters();
        }
      }
    }
    window.addEventListener('hashchange', renderRoute);

    /** 其他互動 **/
    function viewDetail(id){
      const item = DATA.find(d=>d.id===id);
      if(!item) return;
      alert(`${item.title}
地點：${item.city}
價格：NT$ ${item.priceWan.toLocaleString()} 萬

${item.desc}`);
    }
    function contactAgent(id){
      const item = DATA.find(d=>d.id===id);
      if(!item) return;
      const name = encodeURIComponent(item.title);
      window.location.href = `mailto:agent@example.com?subject=我要諮詢%20${name}&body=您好，我想了解 ${name} 的更多資訊。`;
    }

    // 初始化
    renderRoute();
  </script>
</body>
</html>







